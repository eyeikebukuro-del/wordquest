import json
import re

def simplify_japanese(text):
    # Mapping of difficult compounds to simpler ones
    # This is a curated list based on the analysis
    replacements = {
        "専門店": "とくべつなお店",
        "感謝": "かんしゃ",
        "質問": "しつもん",
        "作業": "しごと",
        "利用": "つかうこと",
        "参加": "くわわること",
        "人生": "生きている間（じんせい）",
        "問題": "もんだい",
        "滞在": "とまること",
        "授業": "おべんきょう",
        "決定": "きめること",
        "感情": "きもち",
        "変更": "かえること",
        "成長": "大きくなること",
        "理解": "わかること",
        "我慢": "がまん",
        "偶然": "たまたま",
        "開催": "開（ひら）くこと",
        "重要": "たいせつな",
        "選択": "えらぶこと",
        "運動競技": "スポーツ",
        "一生懸命": "いっしょうけんめい",
        "医師": "おいしゃさん",
        "歓迎": "かんげい",
        "計画": "けいかく",
        "歴史": "れきし",
        "興味深": "おもしろい",
        "節約": "むだをはぶくこと",
        "保存": "のこしておくこと",
        "活動": "うごき",
        "科学者": "かがくしゃ",
        "一度": "一回",
        "到着": "つくこと",
        "困難": "むずかしいこと",
        "偉大": "すごい",
        "興味": "きょうみ",
        "関心": "きょうみ",
        "言語": "ことば",
        "合格": "ごうかく",
        "通過": "通りすぎること",
        "芸術": "げいじゅつ",
        "美術": "びじゅつ",
        "植物": "草花（くさばな）",
        "有名": "ゆうめい",
        "最高": "いちばん",
        "最後": "さいご",
        "自分": "じぶん",
        "全部": "ぜんぶ",
        "簡単": "かんたん",
        "容易": "かんたん",
        "確認": "たしかめること",
        "自由": "じゆう",
        "想像": "おもうこと",
        "身体": "からだ",
        "地図": "ちず",
        "年齢": "とし",
        "名刺": "なまえのカード",
        "以来": "それからずっと",
        "見本": "みほん",
        "季節": "きせつ",
        "運転": "うんてん",
        "競技会": "しあい",
        "地域": "ばしょ",
        "面積": "広さ（めんせき）",
        "飛行機": "ひこうき",
        "期待": "たのしみにすること",
        "能力": "ちから",
        "座席": "すわる場所",
        "会議": "話し合い",
        "切符": "きっぷ",
        "豊富": "たくさんあること",
        "援助": "助け",
        "才能": "とくいなこと",
        "招待": "まねくこと",
        "試験": "テスト",
        "削減": "へらすこと",
        "案内人": "ガイド",
        "実際": "じっさい",
        "奇妙": "ふしぎな",
        "農場": "のうじょう",
        "注文": "たのむこと",
        "助言": "アドバイス",
        "人間": "ひと",
        "状況": "ようす",
        "事態": "ようす",
        "親愛": "だいすきな",
        "完璧": "かんぺき",
        "常用": "いつもつかう",
        "温度": "おんど",
        "気温": "きおん",
        "体温": "たいおん",
        "慎重": "気をつけて",
        "現実": "じっさいの",
        "安全": "あんぜん",
        "世紀": "100年間のこと",
        "証明": "たしかめること",
        "鉄道": "せんろ",
        "幸運": "ラッキー",
        "儀式": "ぎしき",
        "警察": "けいさつ",
        "追求": "追い求めること",
        "明白": "あきらかな",
        "期間": "あいだ",
        "乱暴": "らんぼう",
        "完全": "ぜんぶ",
        "制度": "きまり",
        "体系": "しくみ",
        "教育": "おしえ",
        "水準": "レベル",
        "新鮮": "しんせん",
        "瞬間": "ちょっとの間",
        "汚染": "よごれ",
        "公害": "こうがい",
        "推薦": "すすめること",
        "安価": "やすいこと",
        "適切": "ちょうどよい",
        "平和": "へいわ",
        "発見": "みつけること",
        "発表": "はっぴょう",
        "正確": "せいかく",
        "相手": "あいて",
        "活動的": "げんきな",
        "不可能": "できないこと",
        "通常": "いつも",
        "砂糖": "さとう",
        "音量": "おとの大きさ",
        "住所": "すんでいるところ",
        "理論": "りろん",
        "趣味": "しゅみ",
        "最近": "さいきん",
        "永遠": "えいえん",
        "安売": "やすうり",
        "雇用": "やとうこと",
        "役割": "やくわり",
        "習得": "おぼえること",
        "通貨": "おかね",
        "無礼": "しつれい",
        "場面": "シーン",
        "乗客": "のっているひと",
        "粉末": "こな",
        "結婚": "けっこん",
        "輸入": "ゆにゅう",
        "上着": "うわぎ",
        "二重": "ふたえ",
        "階下": "したの階",
        "画像": "がぞう",
        "輸出": "ゆしゅつ",
        "接着剤": "のり",
        "存在": "あること",
        "地帯": "ばしょ",
        "大臣": "大（だい）じん",
        "牧師": "ぼくし",
        "達成": "なしとげること",
        "聴衆": "きいているひと",
        "観客": "みているひと",
        "視聴者": "みているひと",
        "不足": "たりないこと",
        "主題": "テーマ",
        "信頼": "しんじること",
        "決勝": "さいごのしあい",
        "複製": "コピー",
        "半分": "はんぶん",
        "昨夜": "きのうの夜",
        "午前": "ごぜん",
        "印刷": "いんさつ",
        "左折": "左にまがること",
        "右折": "右にまがること",
        "収入": "もらうお金",
        "減少": "へること",
        "通学": "学校に行くこと",
        "紹介": "しょうかい",
        "石鹸": "せっけん",
        "遺伝子": "いでんし",
        "独身": "ひとりのひと",
        "規模": "大きさ",
        "上昇": "あがること",
        "態度": "たいど",
        "工業": "こうぎょう",
        "最低": "いちばん下",
        "最新": "さいしん",
        "希少": "めずらしい",
        "業績": "せいか",
        "理念": "考えかた",
        "泥棒": "どろぼう",
        "経費": "かかるお金",
        "許容": "ゆるすこと",
        "政治家": "せいじか",
        "文法": "ぶんぽう",
        "無理": "むり",
        "小説": "ものがたり",
        "陰謀": "たくらみ",
        "最大": "いちばん大きい",
        "回復": "なおること",
        "現実的": "じっさいにありそうな",
        "幾何学的": "図（ず）のような",
        "世界全体": "せかいじゅう",
        "四季": "はる・なつ・あき・ふゆ",
        "日用品": "まいにち使うもの",
        "鼻歌": "はなうた",
        "健康": "けんこう",
        "片足": "かたあし",
        "片方": "かたほう",
        "専門店": "とくべつなお店",
        "現実": "じっさいの",
        "事実": "ホントのこと",
        "国語": "こくご"
    }
    
    # Sort keys by length descending to match longest possible replacements first
    sorted_keys = sorted(replacements.keys(), key=len, reverse=True)
    
    for key in sorted_keys:
        if key in text:
            text = text.replace(key, replacements[key])
            
    return text

def process_file(file_path):
    with open(file_path, 'r', encoding='utf-8') as f:
        data = json.load(f)
        
    for word in data['words']:
        orig = word.get('japanese', '')
        simplified = simplify_japanese(orig)
        if orig != simplified:
            # print(f"Updating ID {word['id']}: {orig} -> {simplified}")
            word['japanese'] = simplified
            
    with open(file_path, 'w', encoding='utf-8') as f:
        json.dump(data, f, ensure_ascii=False, indent=2)

if __name__ == "__main__":
    process_file('src/vocabulary/words.json')
    print("Simplification complete.")
